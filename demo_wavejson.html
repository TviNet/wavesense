<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WaveJSON Demo - WaveSense</title>
    <script src="https://unpkg.com/wavedrom@3.5.0/dist/wavedrom.min.js"></script>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .demo-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        .waveform {
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 16px;
            margin: 16px 0;
        }
        h1 { color: #333; }
        h2 { color: #666; border-bottom: 2px solid #eee; padding-bottom: 8px; }
        .highlight { background: #fff3cd; padding: 2px 4px; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>WaveJSON Rendering Demo</h1>
    <p>This demonstrates how to convert your waveform txt files to WaveJSON and render them using WaveDrom.</p>

    <div class="demo-section">
        <h2>1. Sample WaveJSON Generated from Basic Counting</h2>
        <p>Here's what your <span class="highlight">basic_counting.txt</span> looks like when converted to WaveJSON:</p>
        
        <div class="code-block" id="sampleWaveJSON">
{
  "signal": [
    {
      "name": "TOP.clk",
      "wave": "P..........................."
    },
    {
      "name": "TOP.rst",
      "wave": "11..0..................."
    },
    {
      "name": "TOP.en",
      "wave": "00..1..................."
    },
    {
      "name": "TOP.count[7:0]",
      "wave": "====.=.=.=.=.=.=.=.=.=.",
      "data": ["0x00", "0x01", "0x02", "0x03", "0x04", "0x05", "0x06", "0x07", "0x08", "0x09", "0x0a", "0x0b", "0x0c", "0x0d", "0x0e", "0x0f", "0x10"]
    }
  ],
  "config": {
    "hscale": 2,
    "skin": "narrow"
  },
  "head": {
    "text": "Basic Counting Waveform"
  }
}
        </div>

        <div id="waveform1"></div>
    </div>

    <div class="demo-section">
        <h2>2. How to Use</h2>
        
        <h3>Option 1: Python Command Line</h3>
        <div class="code-block">
# Convert txt to WaveJSON
python3 tools/txt_to_wavejson.py temp_artifacts/waves/basic_counting.txt --pretty --title "Basic Counting"

# Output to file
python3 tools/txt_to_wavejson.py temp_artifacts/waves/basic_counting.txt -o basic_counting.json --pretty
        </div>

        <h3>Option 2: Web Interface</h3>
        <p>Use the enhanced web interface:</p>
        <ul>
            <li><strong>Original interface:</strong> <code>web/index.html</code> - Now includes WaveJSON export</li>
            <li><strong>WaveJSON-focused:</strong> <code>web/wavejson.html</code> - Pure WaveJSON renderer</li>
        </ul>

        <h3>Option 3: Direct JavaScript Integration</h3>
        <div class="code-block">
// Convert txt content to WaveJSON
const waveJSON = WaveformConverter.txtToWaveJSON(txtContent, "My Waveform");

// Render with WaveDrom
WaveDrom.renderWaveElement('myDiv', waveJSON);
        </div>
    </div>

    <div class="demo-section">
        <h2>3. Key Benefits of WaveJSON</h2>
        <ul>
            <li><strong>Standardized:</strong> Industry-standard format supported by many tools</li>
            <li><strong>Compact:</strong> Much smaller than VCD files</li>
            <li><strong>Editable:</strong> Human-readable JSON format</li>
            <li><strong>Portable:</strong> Works with WaveDrom, web browsers, documentation</li>
            <li><strong>Interactive:</strong> Can be embedded in websites, documentation, reports</li>
        </ul>
    </div>

    <div class="demo-section">
        <h2>4. WaveJSON Format Explanation</h2>
        <table style="width: 100%; border-collapse: collapse;">
            <tr style="background: #f8f9fa;">
                <th style="border: 1px solid #ddd; padding: 8px;">Wave Character</th>
                <th style="border: 1px solid #ddd; padding: 8px;">Meaning</th>
                <th style="border: 1px solid #ddd; padding: 8px;">Visual</th>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;"><code>0</code></td>
                <td style="border: 1px solid #ddd; padding: 8px;">Logic low</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Low level</td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;"><code>1</code></td>
                <td style="border: 1px solid #ddd; padding: 8px;">Logic high</td>
                <td style="border: 1px solid #ddd; padding: 8px;">High level</td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;"><code>P</code></td>
                <td style="border: 1px solid #ddd; padding: 8px;">Positive clock edge</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Clock signal</td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;"><code>=</code></td>
                <td style="border: 1px solid #ddd; padding: 8px;">Data value (with data array)</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Data bus with value</td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;"><code>.</code></td>
                <td style="border: 1px solid #ddd; padding: 8px;">Continue previous state</td>
                <td style="border: 1px solid #ddd; padding: 8px;">No change</td>
            </tr>
        </table>
    </div>

    <script>
        // Render the sample waveform
        const sampleWaveJSON = {
            "signal": [
                {
                    "name": "TOP.clk",
                    "wave": "P..........................."
                },
                {
                    "name": "TOP.rst", 
                    "wave": "11..0..................."
                },
                {
                    "name": "TOP.en",
                    "wave": "00..1..................."
                },
                {
                    "name": "TOP.count[7:0]",
                    "wave": "====.=.=.=.=.=.=.=.=.=.",
                    "data": ["0x00", "0x01", "0x02", "0x03", "0x04", "0x05", "0x06", "0x07", "0x08", "0x09", "0x0a", "0x0b", "0x0c", "0x0d", "0x0e", "0x0f", "0x10"]
                }
            ],
            "config": {
                "hscale": 2,
                "skin": "narrow"
            },
            "head": {
                "text": "Basic Counting Waveform"
            }
        };

        // Render when page loads
        window.addEventListener('load', function() {
            WaveDrom.renderWaveElement('waveform1', sampleWaveJSON);
        });
    </script>
</body>
</html>
